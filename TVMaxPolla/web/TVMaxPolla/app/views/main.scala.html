@(title: String)(content: Html)

<!DOCTYPE html>

<html>
    <head>
        <title>@title</title>
        
        <meta charset="utf-8">
    	<meta http-equiv="X-UA-Compatible" content="IE=edge">
    	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    	<meta name="description" content="@title">
    	<meta name="author" content="Hecticus Software, Inc.">
    	<link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/normalize.css")">
        <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/main.css")">
        <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/bootstrap.min.css")">
        <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/animate.css")">
        <link rel="shortcut icon" type="image/png" href="@routes.Assets.at("images/favicon.png")">
        <script src="@routes.Assets.at("javascripts/jquery-1.9.0.min.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("javascripts/bootstrap.min.js")" type="text/javascript"></script>
        
        <script src="@controllers.routes.Application.jsRoutes()" type="text/javascript"></script>
        <script src="@routes.Application.javascriptRoutes" type="text/javascript"></script>
        
        <style>
        
        	html {font-size:62.5%;} 	
        	body{font-family: Arial, Helvetica, sans-serif;}
        	
        	
			figcaption{font-size: x-small; font-weight: bold; z-index: 1500;}
			
			
			/*img.flag {width:75%; height:25%; min-width:75px; max-width:75px; min-height:50px; max-height:50px; }*/
			/*img.flag {width:75%; height:25%; }*/			
			img.flag {width:85px; height:auto; }
			.content-flag-score img.flag {width:100%; height:auto; }
			
			/*img.flag:hover {cursor:pointer; opacity:1.0; filter:alpha(opacity=100);}															
			.off{opacity:0.4; filter:alpha(opacity=40);}
			.on{opacity:1.0; filter:alpha(opacity=100);}*/
			
			/*img.arrow{width:30%; height:auto; min-width:15px; max-width:15px; min-height:15px; max-height:15px; cursor: pointer; }*/
			img.arrow{width:12px; height:auto;  cursor: pointer; }

			

			#keys {background-color: #186198; max-height: 550px;}
			
			
			.menu, .calcular{cursor:pointer; }
			.menu:hover{color:#ffe85c}
			.menu.on{color:#ffe85c}
			
			.hidden {visibility:hidden;}
			
			
			.content-flag-score {width: 75px; min-height: 60px; text-align: center; padding: 5px; background-color: #ececef; -moz-box-shadow: 3px 3px rgba(214,214,216,0.7); -webkit-box-shadow: 3px 3px rgba(214,214,216,0.7); box-shadow: 3px 3px rgba(214,214,216,0.7); font-size:xx-small; font-weight:bold;  }
			.content-flag-score:last-child{margin:5px 0 5px 0;}			
			.content-flag-score.on {background-color:#bababb;  -moz-box-shadow: 3px 3px rgba(226,226,229,0.7); -webkit-box-shadow: 3px 3px rgba(226,226,229,0.7); box-shadow: 3px 3px rgba(226,226,229,0.7); text-align: center;}			
			.content-flag-score.on img.flag {width:75%;}
			
			.goal {text-align:center;}
			
			ul,li {padding:0; margin:0; border:0; list-style:none outside none; text-align:center;}
			li[data-phase="6"] {float:left;}
			
			
			
			
        </style>
        
		<script>
	  		$(function() {
	  	
	
				
				
				
				
				$.fsetVisibleMenu = function() {
					
					var _return	= false;
					$.each(arrPhase, function(index,phase) {
						
						if (phase.id !=6 ) {

							var total = 0;
							var value = parseInt(phase.games);
							if (phase.id == 1) value = parseInt(phase.games/2);						
	
							$.each(phase.group, function(index,group) {
								if (phase.id == group.phase) total += group.classified.length;	
							});
	
							if (total == value) {
								if (index < 5) {
									$('.menu[data-phase="'+arrPhase[index+1].id+'"]').removeClass('hidden');									
								}
							} else {
														
								for (var i = (index+1); i < arrPhase.length; i++ ) {
								
									$('.menu[data-phase="'+arrPhase[i].id+'"]').addClass('hidden');
									
									$.each(arrPhase, function(index,phase) {
										if (phase.id >= arrPhase[i].id) {
											$.each(phase.group, function(index,group) {											
												group.classified = [];
											});	
										}						
									});
									
									
									
								}
								
								_return = true;	
							}
							
							if (_return) {
								return false;
							}
						
						}


					});
					return _return;
				};


				$.fCompare = function(_groupTeams,_eval) {
					
					var aux = 0;
					var othersTeams= [];
					var afirts = [];
					var asecond = [];
	
					for ( var i = 0; i < 2; i++ ) {
							
							$.each(_groupTeams, function(index,team) { if (eval(_eval)>aux) aux = eval(_eval); });						
							$.each(_groupTeams, function(index,team) {
							
											
								if (eval(_eval) == aux) {
									if (i == 0) {
										afirts.push(team);
									} else {
										asecond.push(team);
									}
								} else {
									othersTeams.push(team);
								}							
							});
							
							aux = 0;
							_groupTeams = othersTeams;
							othersTeam = [];
	
					}
	
					return {firts:afirts,second:asecond};
			};
			







				$.fUpdateStandingPhase22 = function() {
					
					var winners= [];
					var wclassifiedinners= [];		
					var firts;
					var second;
					var points;
					var condition = ['team.points','team.goals.d','team.goals.f'];

					//var _phase = $.fgetPhaseActive();
					
					$.each(arrPhase, function(index, phase) {
						
						
						$.each(phase.group, function(index, group) {

							group.classified = [];
							points = $.fCompare(group.team,condition[0]);
							firts = points.firts;
							second = points.second;	
										
							if (firts.length==1) {						
								winners.push(points.firts);
								firts = points.second;												
							} else {
								firts = points.firts;
							}
						
							$.each(winners, function(index,team) {
								team = team[0];
								group.classified.push(team);
								
								//console.log('AQUI LOS GANADORES DE LA SIGUIENTE FASE ->' + team.name);
								
							});
						
							winners = [];					
	
							
							
							$.each(group.classified, function(index, team) {
							
								var phase = (group.phase+1);		
								if (group.phase == 4) {
									phase = 6;
									if (group.name.indexOf('W') < 0) {
										group.name = group.name+'W';
									}
		
									
								} 
	
	
								$.fUpdate(group.name,team.placeholder,phase);
											
								if (team.placeholder != null) {
								
									if (group.phase == 6) {
										$('[data-index="WIN"]').attr('data-index',group.name);
										$('[data-index="'+group.name+'"]').html('<figure><img class="flag"  src="'+team.placeholder.flag+'" alt="" /><figcaption>'+team.placeholder.shortName+'</figcaption></figure>');	
									} else {									
										$('[data-index="'+group.name+'"]').html('<figure><img class="flag"  src="'+team.placeholder.flag+'" alt="" /><figcaption>'+team.placeholder.shortName+'</figcaption></figure>');
										//$('[data-index2="'+group.name+'"]').html('-');
										//console.log('AQUI LOS GANADORES DE LA SIGUIENTE FASE ->' +'[data-index2="'+group.name+'"]' + ' : ' + group.name);
										
										
									}
									
								}
								
		
							});
						
						});
						
					});
					

				};













			$.fUpdateStandingPhase2 = function() {
					
					var winners= [];
					var wclassifiedinners= [];		
					var firts;
					var second;
					var points;
					var condition = ['team.points','team.goals.d','team.goals.f'];

					var _phase = $.fgetPhaseActive();
					$.each(_phase.group, function(index, group) {

						group.classified = [];
						points = $.fCompare(group.team,condition[0]);
						firts = points.firts;
						second = points.second;	
									
						if (firts.length==1) {						
							winners.push(points.firts);
							firts = points.second;												
						} else {
							firts = points.firts;
						}
					
						$.each(winners, function(index,team) {
							team = team[0];
							group.classified.push(team);
							
							//console.log('AQUI LOS GANADORES DE LA SIGUIENTE FASE ->' + team.name);
							
						});
					
						winners = [];					

						
						
						$.each(group.classified, function(index, team) {
						
							var phase = (group.phase+1);		
							if (group.phase == 4) {
								phase = 6;
								if (group.name.indexOf('W') < 0) {
									group.name = group.name+'W';
								}
	
								
							} 


							$.fUpdate(group.name,team.placeholder,phase);
										
							if (team.placeholder != null) {
							
								if (group.phase == 6) {
									$('[data-index="WIN"]').attr('data-index',group.name);
									$('[data-index="'+group.name+'"]').html('<figure><img class="flag"  src="'+team.placeholder.flag+'" alt="" /><figcaption>'+team.placeholder.shortName+'</figcaption></figure>');	
								} else {								
									$('[data-index="'+group.name+'"]').html('<figure><img class="flag"  src="'+team.placeholder.flag+'" alt="" /><figcaption>'+team.placeholder.shortName+'</figcaption></figure>');
									
									
									//$('[data-index2="'+group.name+'"]').html('-');
									//console.log('AQUI LOS GANADORES DE LA SIGUIENTE FASE ->' +'[data-index2="'+group.name+'"]' + ' : ' + group.name);
									
									
								}
								
							}
							
	
						});
						
					});
					


				};

			
				$.fUpdateKeys = function() {
				
					var _group = $.fgetGroupActive();
					var name1 = _group.name + 1;
					var name2 = _group.name + 2;	
					
					$('.content-flag-score[data-index="'+name1+'"]').html($('.content-flag-score[data-index="'+name1+'"]').data('alt'));	 
					$('.content-flag-score[data-index="'+name2+'"]').html($('.content-flag-score[data-index="'+name2+'"]').data('alt'));
					
					$('li[data-index="'+name1+'"]').html(name1);	 
					$('li[data-index="'+name2+'"]').html(name2);
	
					$.each(arrPhase, function( index, phase) {
						$.each(phase.group, function( index, group) {
							//console.log('por aqui paso con este nombre ' + group.name);
						
							if (group.name.indexOf(name1) >= 0) {
								$('[data-index="'+group.name+'"]').html($('[data-index="'+group.name+'"]').data('alt'));
																		
							}
							
							if (group.name.indexOf(name2) >= 0) {
								$('[data-index="'+group.name+'"]').html($('[data-index="'+group.name+'"]').data('alt'));
							}
						
						
						
						});
					});
										
										
					
					
						
				};
			
			
			
			
				
				

				
			


				$.fgetPhaseActive = function() {
				
					var _return	= false;
					
					$.each(arrPhase, function(index,phase) {
											
						if (phase.active) {
							_return = phase;
							return true;
						}	
						
						if (_return)  {
							return false;
						} 								
					});
					
					return _return;
					
				};


				$.fgetGroupActive = function() {
				
					var _phase = $.fgetPhaseActive();
					var _return	= false;

					$.each(_phase.group, function( index, group) {						
						if (group.active) {
							_return = group;
							return true;
						}
						
						if (_return)  {
							return false;
						}										
					});
					
					return _return;
					
				};



				
				
				






				$.fUpdateStandingGroup2 = function() {

					
					var groupTeams = [];
					var winners= [];	
					var firts;
					var second;

					var points;
					var condition = ['team.points','team.goals.d','team.goals.f'];


					var _group = $.fgetGroupActive();
					_group.classified = [];
					firts = _group.team;

					for (var i = 0; i < 2; i++ ) {
																
						for (var c = 0; c < condition.length ; c++ ) {
					
							points = $.fCompare(firts,condition[c]);
							firts = points.firts;
							second = points.second;

							if (firts.length==1) {								
								winners.push(points.firts);
								firts = points.second;
								c = 3;								
							} else {
								firts = points.firts;
							}
							
						}
					}

					if (winners.length <= 1) {
						
						if (winners.length == 0) {
							console.log('1 Dos o más equipos siguen empatados en la primera posicion');
							$.fUpdateKeys();	
						} else if (winners.length == 1) {
							console.log('1 Dos o más equipos siguen empatados en la segunda posicion');
							$.fUpdateKeys();								
						}
						
						
						var deleteTeam = [];
						var deleted = true;
						var gameswinners = [];
						
						/*Busco los eliminados*/
						$.each(_group.team, function(index,team) {
																							
							deleted = true;
							$.each(firts, function(index,value) {											
								if (team.id == value.id) {
									deleted = false;
								}
							});
							
							if (deleted) {
								deleteTeam.push(team);
							}
							
						});
						
						$.each(_group.game, function(index,game) {
															
							deleted = true;
							$.each(deleteTeam, function(index,value) {								
								if ((value.id == game.team[0].id) || (value.id == game.team[1].id)) {
									deleted = false;
								}
							});					
					
							if (deleted) {
								gameswinners.push(game);
							}
																	
						});
						

						$.each(firts, function(index,team) {
								
								team.goals.f = 0;
								team.goals.a = 0;
								team.points = 0;
								
								$.each(gameswinners, function(index,game) {								
									$.each(game.team, function( index, value ) {										
										if (team.id == value.id) {
											team.goals.f += value.goals.f;
											team.goals.a += value.goals.a;
											team.goals.d = 	(team.goals.f - team.goals.a);
											team.points += value.points;
										};
									});
								});

						});

						for (var i = 0; i < 2; i++ ) {	
																	
							for (var c = 0; c < condition.length ; c++ ) {
						
								points = $.fCompare(firts,condition[c]);
								firts = points.firts;
								second = points.second;
	
								if (firts.length==1) {								
									winners.push(points.firts);
									firts = points.second;
									c = 3;								
								} else {
									firts = points.firts;
								}
								
							}
						}
						
						if (winners.length == 0) {
							console.log('2 Dos o más equipos siguen empatados en la primera posicion');
							$.fUpdateKeys();
						} else if (winners.length == 1) {
							console.log('2 Dos o más equipos siguen empatados en la segunda posicion');
							$.fUpdateKeys();							
						} else {
							console.log('2 se resolvio');
						}

					} else {
						console.log('1 Tenesmo primero y segundo lugar definido');
					}


					var classified = [];
								
					$.each(winners, function(index,team) {
						team = team[0];	
						classified.push(team);						
					});

					_group.classified = classified;

					$.each(_group.classified, function( index, team ) {	
											
						$.fUpdate(_group.name+(index+1),team,2);
						$('[data-index="'+_group.name+(index+1)+'"]').html('<figure><img class="flag"  src="'+team.flag+'" alt="Camerún" /><figcaption>'+team.shortName+'</figcaption></figure>');
							
						
					});	


				};


				$.fUpdate = function(_name,_team,_phase) {
					$.each(arrPhase, function(index,phase) {
						if (phase.id == _phase) {						
							$.each(phase.group, function(index,group) {						
								$.each(group.team, function(index,team) {
									if (team.name == _name) {
										team.placeholder = _team;
									}
								});
							});
						}
					});	
				};

				


				

				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				$(document).on('click','.up, .down', function() {
				
					var _this = $(this);				
					$('.flag[data-index="'+$(this).data('index')+'"]').addClass('on');		
					var eGoal = $('.goal[data-index="'+$(this).data('index')+'"]');
					var iGoal = eGoal.data('goal');	
					iGoal = parseInt(iGoal);
					
					if ($(this).hasClass('up')) {
						iGoal ++;
					} else {
						if (iGoal>=1) iGoal --;
					}	
					
					eGoal.data('goal',iGoal);
					eGoal.html(iGoal);

					$.each(arrPhase, function( index, phase ) {
						if (phase.active) {
												
							$.each(phase.group, function( index, group ) {
							
								if (group.active) {
																	
									$.each(group.game, function( index, game ) {
										if (_this.data('game') == game.id) {
											$.each(game.team, function( index, team ) {
												if (_this.data('team') == team.id) {
													team.goals.f = iGoal;
												}
											});
										};
										
									});

									$.each(group.game, function( index, game ) {
																																				
										if (game.team[0].goals.f > game.team[1].goals.f) {																		
											game.team[0].points = 3;
											game.team[1].points = 0;																																		
										} else if (game.team[1].goals.f > game.team[0].goals.f) {									
											game.team[0].points = 0;									
											game.team[1].points = 3;		
										} else {
											game.team[0].points = 1;
											game.team[1].points = 1;	
										};
										
										game.team[0].goals.a = game.team[1].goals.f;
										game.team[1].goals.a = game.team[0].goals.f;
								
									});
							
							
									$.each(group.team, function( index, team ) {
		
										team.goals.f = 0;
										team.goals.a = 0;
										team.points = 0;
										
										$.each(group.game, function( index, game ) {
											$.each(game.team, function( index, value ) {
												if (team.id == value.id) {
													team.goals.f += value.goals.f;
													team.goals.a += value.goals.a;
													team.goals.d = 	(team.goals.f - team.goals.a);
													team.points += value.points;
												};
											});
										});
		
									});

								}
								
							});
							
						}
					});
					

				});				
				
				
				
				
				
				
				
				
				
				
				$(document).on('click','.menu[data-phase]', function() {
					
					var _this = $(this); 
					var selectorphase  = 'div[data-phase="'+$(this).data('phase')+'"]';
					$('.phase[data-phase]').addClass('hidden');
					$(selectorphase).removeClass('hidden');
					
					$.each(arrPhase, function( index, phase ) {
						phase.active = false;
						if (phase.id== _this.data('phase')) {
							phase.active = true;
						}
					});
					
					
					
				});
				
				$(document).on('click','.menu[data-group]', function() {
					
					var _this = $(this); 
					var selectorgroup  = 'div[data-group="'+$(this).data('group')+'"]';
					$('.menu').removeClass('on');
					$(this).addClass('on');	
					$('.name-group').html($(this).html());
					$('.calcular').data('group',$(this).data('group')); 
					$('.group[data-group]').addClass('hidden');
					$(selectorgroup).removeClass('hidden');

					$.each(arrPhase, function( index,phase) {
						if (phase.active) {
							$.each(phase.group, function( index, group ) {
								group.active = false;
								if (group.id== _this.data('group')) {
									group.active = true;	
								}
							});
						}
					});

				});

				$(document).on('click','.calcular[data-group]', function() {					
					$.fUpdateStandingGroup2();					
					//$.fsetVisibleMenu();
					$.fEjemplo();
				});

				$(document).on('click','.calcular[data-phase]', function() {
					$.fUpdateStandingPhase2();
					//$.fsetVisibleMenu();
					
					$.fEjemplo();

				});

				$.fEjemplo = function() {
					var _id = 0;
					var _total=0;
					$.each(arrPhase, function( index,phase) {
						
						if (phase.active) {
							
							
							
							if (phase.id == 1) {
								
								$.each(phase.group, function( index,group) {
									_total += group.classified.length;
								});
								
								if (_total == 16) {
									$('.menu[data-phase="'+(phase.id+1)+'"]').removeClass('hidden');		
								}
								
								
								
							}
							
							if (phase.id == 2) {
								
								$.each(phase.group, function( index,group) {
									_total += group.classified.length;
								});
								
								if (_total == 8) {
									$('.menu[data-phase="'+(phase.id+1)+'"]').removeClass('hidden');		
								}
								
								
								
							}
							
							if (phase.id == 3) {
								
								$.each(phase.group, function( index,group) {
									_total += group.classified.length;
								});
								
								if (_total == 4) {
									$('.menu[data-phase="'+(phase.id+1)+'"]').removeClass('hidden');		
								}
								
								
								
							}
							
							
							if (phase.id == 4) {
								
								$.each(phase.group, function( index,group) {
									_total += group.classified.length;
								});
								
								if (_total == 2) {
									$('.menu[data-phase="'+(phase.id+2)+'"]').removeClass('hidden');		
								}

							}

						} 

						
					});	
					
					
								
				};


	  		});
	  		
  		</script>
        
    </head>
    <body>
		@content
    </body>
</html>
