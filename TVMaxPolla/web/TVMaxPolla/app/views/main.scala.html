@(title: String)(content: Html)

<!DOCTYPE html>

<html>
    <head>
        <title>@title</title>
        
        <meta charset="utf-8">
    	<meta http-equiv="X-UA-Compatible" content="IE=edge">
    	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    	<meta name="description" content="@title">
    	<meta name="author" content="Hecticus Software, Inc.">
    	<link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/normalize.css")">
        <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/main.css")">
        <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/bootstrap.min.css")">
        <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/animate.css")">
        <link rel="shortcut icon" type="image/png" href="@routes.Assets.at("images/favicon.png")">
        <script src="@routes.Assets.at("javascripts/jquery-1.9.0.min.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("javascripts/bootstrap.min.js")" type="text/javascript"></script>        
       	<script src="@routes.SignUp.jsRoutes()" type="text/javascript"></script>
		
        
       
        
        <style>
        
        	html {font-size:62.5%;} 	
        	body{font-family: Arial, Helvetica, sans-serif;}
        	
			* { -webkit-border-radius: 0 !important; -moz-border-radius: 0 !important; border-radius: 0 !important;}


			

			.bar {background: #FFFFFF url(@routes.Assets.at("images/separadorLogIn.png")) right top repeat-y; margin-top:5px; }


			.help-block {display:none !important; }
			img.flag {width:67px; height:45px; vertical-align: middle;}
			img.arrow{width:11px; height:8px;  cursor: pointer; }
			
			#brackets {background: url(@routes.Assets.at("images/fondoEsquema.jpg")) left top repeat; height: 670px; }
			
			#brackets .left .content-flag-score { margin: 0 auto;}
			#brackets .right .content-flag-score { margin: 0 auto;}
			
			#brackets .round-16 {margin-top: 0px; }
			#brackets .quarter-finals {margin-top: 43px; overflow: visible; height:auto;   }
			#brackets .semi-finals  {margin-top: 130px; overflow: visible; height:auto; }			
			#brackets .final  {margin-top: 115px; margin-bottom: 100px;}
			
			#brackets .round-16 li {margin-top: 0px; margin-bottom: 10px;}
			#brackets .quarter-finals li {position:relative;  margin-top: 0px; margin-bottom: 90px;}
			#brackets .semi-finals li {position:relative;  margin-top: 0px; margin-bottom: 247px;}			


			#brackets .left .quarter-finals li .llave { overflow:visible; position:absolute;  bottom:-15px; left:-25px; width:50px; height:91px;  background: url(@routes.Assets.at("images/brackets/right/small.png")) no-repeat left center; }
			#brackets .left .semi-finals li .llave { overflow:visible; position:absolute;  bottom:-40px; left:-30px; width:70px; height:151px;  background: url(@routes.Assets.at("images/brackets/right/medium.png")) no-repeat left center; }
			#brackets .finalists .left .llave { overflow:visible; position:absolute;  bottom:-130px; left:-12px; width:70px; height:330px;  background: url(@routes.Assets.at("images/brackets/right/large.png")) no-repeat left center; }
			
			#brackets .right .quarter-finals li .llave { overflow:visible; position:absolute;  bottom:-15px; left:105px; width:50px; height:91px;  background: url(@routes.Assets.at("images/brackets/left/small.png")) no-repeat left center; }
			#brackets .right .semi-finals li .llave { overflow:visible; position:absolute;  bottom:-40px; left:100px; width:70px; height:151px;  background: url(@routes.Assets.at("images/brackets/left/medium.png")) no-repeat left center; }
			#brackets .finalists .right .llave { overflow:visible; position:absolute;  bottom:-130px; left:165px; width:70px; height:330px;  background: url(@routes.Assets.at("images/brackets/left/large.png")) no-repeat left center; }
			
			
			#brackets .final li .llave{overflow:visible; position:absolute;  bottom:-70px; left:96px; width:204px; height:46px;  background: url(@routes.Assets.at("images/brackets/win.png")) no-repeat center top; }
			
			
			.menu, .calcular{cursor:pointer; }
			.menu.group:hover{color:#ffe85c}
			.menu.group.on{color:#ffe85c}
			
			.hidden {visibility:hidden;}
			
			.menu.phase{padding:10px; background-color:#E2EBF9; color:#C4C8D3; font-weight: bold;}

			.menu.phase:hover{background-color:#BEC5DF; color:#ffffff;}
			.menu.phase[data-phase="1"].on{background-color:#BAC6DD; color:#ffffff;}
			.menu.phase[data-phase="2"].on{background-color:#8F9FC0; color:#ffffff;}
			.menu.phase[data-phase="3"].on{background-color:#64789C; color:#ffffff;}
			.menu.phase[data-phase="4"].on{background-color:#455D86; color:#ffffff;}
			.menu.phase[data-phase="6"].on{background-color:#314972; color:#ffffff;}
			
			.btn.btn-default.menu.phase.exit {background-color:#d9534f; color:#FFFFFF;}
			.btn.btn-default.menu.phase.exit:hover {padding:10px; background-color:#BEC5DF;  color:#FFFFFF;}
			
			.btn.btn-default.menu.phase.save {background-color:#f1e916; color:#999999;}
			.btn.btn-default.menu.phase.save:hover{padding:10px; background-color:#BEC5DF; color:#ffffff;}

			.content-flag-score {width: 75px; height: 68px; text-align: center; padding: 5px; background-color: #ececef; -moz-box-shadow: 3px 3px rgba(214,214,216,0.7); -webkit-box-shadow: 3px 3px rgba(214,214,216,0.7); box-shadow: 3px 3px rgba(214,214,216,0.7); font-size:xx-small; font-weight:bold; }
			.content-flag-score:last-child{margin:5px 0 5px 0;}			
			.content-flag-score.on {background-color:#bababb;  -moz-box-shadow: 3px 3px rgba(226,226,229,0.7); -webkit-box-shadow: 3px 3px rgba(226,226,229,0.7); box-shadow: 3px 3px rgba(226,226,229,0.7); text-align: center;}			
			.content-flag-score.on img.flag {width:75%;}
			
			.goal {text-align:center;}
			
			ul,li {padding:0; margin:0; border:0; list-style:none outside none; text-align:center;}
			li[data-phase="6"] {float:left;}
			
			.phase .group .game {background: url(@routes.Assets.at("images/logoFondo.png")) left repeat-x;}
			.phase .group .game:nth-child(2n+1) {background-color:#e2e2e3}
			.phase .group .game:nth-child(2n) {background-color:#eaeaee}
			
			.phase:not([data-phase="1"]) .group:nth-child(2n+1) .game {background-color:#eaeaee}
			.phase:not([data-phase="1"]) .group:nth-child(2n) .game{background-color:#e2e2e3}
			
			.date {font-size:x-small;}
			.name {font-weight:bold;}
			
			.btn-group > button.menu.phase {margin-left:2px;} 
			.btn-group > button.menu.phase:first-child {margin-left:0;}
			
			.title {padding: 10px 5px; background-color:#173069; color:#FFFFFF; font-weight: bold; }
			
			.banner { 
				background-image: url(@routes.Assets.at("images/banner.jpg"));
				background-size: cover;
				height: 344px;
			 }

			.form-control.input {
				border:0;
				width: 323px;
  				background: #EAEDF2 url(@routes.Assets.at("images/campoLogIN.png")) no-repeat left;
				background-size: cover;		   				
			}
			
			
			.btn.button {
				width: 200px;
				background: #485c89 url(@routes.Assets.at("images/registrate.png")) no-repeat left; 
				background-size: 150px 32px; 
				color:#ffffff; font-weight: bold;
				margin: 5px 0;
				
			}
			

			.btn.facebook {
				width: 200px;
				border: 1px solid;
				background: #dcdcdd url(@routes.Assets.at("images/FB.png")) no-repeat 1% center; 
				background-size: 30px 28px; color:#999999; 
				font-weight: bold;	
			}
			
	
			
        </style>
        
		<script>
	  		$(function() {
	  		
				$.fCompare = function(_groupTeams,_eval) {
					
					var aux = 0;
					var othersTeams= [];
					var afirts = [];
					var asecond = [];
	
					for ( var i = 0; i < 2; i++ ) {
							
							$.each(_groupTeams, function(index,team) { if (eval(_eval)>aux) aux = eval(_eval); });						
							$.each(_groupTeams, function(index,team) {
							
											
								if (eval(_eval) == aux) {
									if (i == 0) {
										afirts.push(team);
									} else {
										asecond.push(team);
									}
								} else {
									othersTeams.push(team);
								}							
							});
							
							aux = 0;
							_groupTeams = othersTeams;
							othersTeam = [];
	
					}
	
					return {firts:afirts,second:asecond};
				};
			







				









			


				$.fgetPhaseActive = function() {
				
					var _return	= false;
					
					$.each(arrPhase, function(index,phase) {
											
						if (phase.active) {
							_return = phase;
							return true;
						}	
						
						if (_return)  {
							return false;
						} 								
					});
					
					return _return;
					
				};


				$.fgetGroupActive = function() {
				
					var _phase = $.fgetPhaseActive();
					var _return	= false;

					$.each(_phase.group, function( index, group) {						
						if (group.active) {
							_return = group;
							return true;
						}
						
						if (_return)  {
							return false;
						}										
					});
					
					return _return;
					
				};



				
				
				






				$.fUpdateStandingGroup2 = function() {

					
					var groupTeams = [];
					var winners= [];	
					var firts;
					var second;

					var points;
					var condition = ['team.points','team.goals.d','team.goals.f'];


					var _group = $.fgetGroupActive();
					_group.classified = [];
					firts = _group.team;


					for (var i = 0; i < 2; i++ ) {
																
						for (var c = 0; c < condition.length ; c++ ) {
					
							points = $.fCompare(firts,condition[c]);
							firts = points.firts;
							second = points.second;

							if (firts.length==1) {								
								winners.push(points.firts);
								firts = points.second;
								c = 3;								
							} else {
								firts = points.firts;
							}
							
						}
					}

					if (winners.length <= 1) {
						
						if (winners.length == 0) {
							//console.log('1 Dos o mÃ¡s equipos siguen empatados en la primera posicion -> ' + (_group.name+1));
							$('[data-index="'+(_group.name+1)+'"]').html(_group.name+1);
							$('[data-index="'+(_group.name+2)+'"]').html(_group.name+2);
							$.fUpdateBrackets(2,_group.name,true);
						} else if (winners.length == 1) {
							//console.log('1 Dos o mÃ¡s equipos siguen empatados en la segunda posicion -> ' + (_group.name+2));
							$('[data-index="'+(_group.name+2)+'"]').html(_group.name+2);																					
							$.fUpdateBrackets(2,_group.name,true);
						}
						
						
						var deleteTeam = [];
						var deleted = true;
						var gameswinners = [];
						
						/*Busco los eliminados*/
						$.each(_group.team, function(index,team) {
																							
							deleted = true;
							$.each(firts, function(index,value) {											
								if (team.id == value.id) {
									deleted = false;
								}
							});
							
							if (deleted) {
								deleteTeam.push(team);
							}
							
						});
						
						$.each(_group.game, function(index,game) {
															
							deleted = true;
							$.each(deleteTeam, function(index,value) {								
								if ((value.id == game.team[0].id) || (value.id == game.team[1].id)) {
									deleted = false;
								}
							});					
					
							if (deleted) {
								gameswinners.push(game);
							}
																	
						});
						

						$.each(firts, function(index,team) {
								
								team.goals.f = 0;
								team.goals.a = 0;
								team.points = 0;
								
								$.each(gameswinners, function(index,game) {								
									$.each(game.team, function( index, value ) {										
										if (team.id == value.id) {
											team.goals.f += value.goals.f;
											team.goals.a += value.goals.a;
											team.goals.d = 	(team.goals.f - team.goals.a);
											team.points += value.points;
										};
									});
								});

						});

						for (var i = 0; i < 2; i++ ) {	
																	
							for (var c = 0; c < condition.length ; c++ ) {
						
								points = $.fCompare(firts,condition[c]);
								firts = points.firts;
								second = points.second;
	
								if (firts.length==1) {								
									winners.push(points.firts);
									firts = points.second;
									c = 3;								
								} else {
									firts = points.firts;
								}
								
							}
						}
						
						if (winners.length == 0) {
							//console.log('2 Dos o mÃ¡s equipos siguen empatados en la primera posicion -> ' + (_group.name+1));							
							$('[data-index="'+(_group.name+1)+'"]').html(_group.name+1);
							$('[data-index="'+(_group.name+2)+'"]').html(_group.name+2);
							$.fUpdateBrackets(2,_group.name,true);
						} else if (winners.length == 1) {
							//console.log('2 Dos o mÃ¡s equipos siguen empatados en la segunda posicion -> ' + (_group.name+2));
							$('[data-index="'+(_group.name+2)+'"]').html(_group.name+2);														
							$.fUpdateBrackets(2,_group.name,true);
						} else {
							//console.log('2 se resolvio');
						}

					} else {
						//console.log('1 Tenesmo primero y segundo lugar definido');
					}


					var classified = [];
								
					$.each(winners, function(index,team) {
						team = team[0];	
						classified.push(team);						
					});

					_group.classified = classified;

					$.each(_group.classified, function( index, team ) {
						
						$.fUpdate(_group.name+(index+1),team,2);						
						var _team = $.fgetTeam( _group.name+(index+1));
						 
						$('.phase[data-phase="2"] .group .game .team[data-team="'+_team.id+'"] .flag').attr('src',team.flag);
						$('.phase[data-phase="2"] .group .game .team[data-team="'+_team.id+'"] .flag').removeAttr('style');
						$('.phase[data-phase="2"] .group .game .team[data-team="'+_team.id+'"] .name').html(team.name);						
						$('[data-index="'+_group.name+(index+1)+'"]').html('<figure><img class="flag"  src="'+team.flag+'" alt="CamerÃºn" /><figcaption>'+team.shortName+'</figcaption></figure>');
							
						
					});	


				};


				$.fUpdateBrackets = function(_phase, _name, _group) {
					
				
					
					$.each(arrPhase, function(index, phase) {
						if (phase.id>=_phase) {
								
							
							$.each(phase.group, function(index, group) {							
								if (group.name.indexOf(_name) >= 0) {
									

									if ((_group) || (phase.id > _phase)) {									
										$.each(group.game, function( index, game ) {
											$.each(game.team, function( index, team ) {
												$('.phase[data-phase="'+phase.id+'"] .group[data-group="'+group.id+'"] .game .score .team[data-team="'+team.id+'"] .goal').data('goal',0);
												$('.phase[data-phase="'+phase.id+'"] .group[data-group="'+group.id+'"] .game .score .team[data-team="'+team.id+'"] .goal').html(0);
											});
										});
									}
									
									$.each(group.game, function( index, game ) {
																																
										
										
										game.team[0].goals.f =0; 
										game.team[1].goals.f =0;
										
										game.team[0].goals.a =0; 
										game.team[1].goals.a =0;
										
										game.team[0].goals.d = 0;
										game.team[1].goals.d = 0;
										
										game.team[0].points = 0;
										game.team[1].points = 0;
										
										
				
									});
									
									
									$.each(group.team, function(index, team) {
										
										
										
										team.goals.f = 0;
										team.goals.a = 0;
										team.goals.d = 0;
										team.points=0;
									});

									

								}
							});	
						}
					});
				};




				




				

















				$.fUpdateStandingPhase22 = function() {
					
					var winners= [];
					var wclassifiedinners= [];		
					var firts;
					var second;
					var points;
					var condition = ['team.points','team.goals.d','team.goals.f'];

	
					
					
					$.each(arrPhase, function(index, phase) {
						
						if (phase.id > 1) {
							
			
							
							$.each(phase.group, function(index, group) {
	
								group.classified = [];
								
								points = $.fCompare(group.team,condition[0]);
								firts = points.firts;
								second = points.second;	
											
								if (firts.length==1) {						
									winners.push(points.firts);
									firts = points.second;												
								} else {
									firts = points.firts;																		
									$.fUpdateBrackets(phase.id, group.name);
									$('[data-index="'+group.name+'"]').html('-');
								}
							
							
							
	
								$.each(winners, function(index,team) {
									team = team[0];
									group.classified.push(team);
								});
							
								winners = [];					
								
								$.each(group.classified, function(index, team) {	

									var _phase = (phase.id+1);		
									if (phase.id == 4) {
										_phase = 6;
										if (group.name.indexOf('W') < 0) {
											group.name = group.name+'W';
										}
									} 
		
		
									$.fUpdate(group.name,team.placeholder,phase);
									var _team = $.fgetTeam(group.name);
									
	
		
									$.fUpdate(group.name,team.placeholder,_phase);
									var _team = $.fgetTeam(group.name);
											
									if (team.placeholder != null) {
									
										if (phase.id == 6) {
											$('[data-index="WIN"]').attr('data-index',group.name);
											$('[data-index="'+group.name+'"]').html('<figure><img class="flag"  src="'+team.placeholder.flag+'" alt="" /><figcaption>'+team.placeholder.shortName+'</figcaption></figure>');	
										} else {
											
											
											$('.phase[data-phase="'+arrPhase[phase.id].id+'"] .group .game .team[data-team="'+_team.id+'"] .flag').attr('src',team.placeholder.flag);
											$('.phase[data-phase="'+arrPhase[phase.id].id+'"] .group .game .team[data-team="'+_team.id+'"] .flag').removeAttr('style');
											$('.phase[data-phase="'+arrPhase[phase.id].id+'"] .group .game .team[data-team="'+_team.id+'"] .name').html(team.placeholder.name);																					
											$('[data-index="'+group.name+'"]').html('<figure><img class="flag"  src="'+team.placeholder.flag+'" alt="" /><figcaption>'+team.placeholder.shortName+'</figcaption></figure>');

										}
										
									}

								});
							
							});

						}

					});

				};



				$.fgetTeam = function(_name) {
					
					$.each(arrDataTeam, function(index,team) {				
						if (team.name==_name){
							_return = team;	
							return false;
						}
					});
					
					return _return;				
						
				};

				$.fgetTeamId = function(_id) {
					
					$.each(arrDataTeam, function(index,team) {				
						if (team.id==_id){
							_return = team;	
							return false;
						}
					});
					
					return _return;				
						
				};


				$.fUpdate = function(_name,_team,_phase) {
					$.each(arrPhase, function(index,phase) {
						if (phase.id == _phase) {						
							$.each(phase.group, function(index,group) {						
								$.each(group.team, function(index,team) {
									if (team.name == _name) {
										team.placeholder = _team;
									}
								});
							});
						}
					});	
				};

	
				
				$.fgetPhaseActive2 = function(_this) {
				
					var _return	= false;
					var _phase = _this.parents('.phase').data('phase');
					
					$.each(arrPhase, function(index,phase) {
											
						if (phase.id == _phase) {
							_return = phase;
							return true;
						}	
						
						if (_return)  {
							return false;
						} 								
					});
					
					return _return;
					
				};


				$.fgetGroupActive2 = function(_this) {
				
					var _phase = $.fgetPhaseActive2(_this);
					var _return	= false;
					var _group = _this.parents('.group').data('group');

					$.each(_phase.group, function( index, group) {						
						if (group.id == _group) {
							_return = group;
							return true;
						}
						
						if (_return)  {
							return false;
						}										
					});
					
					return _return;
					
				};

				
				$(document).on('click','.save', function() {
					
					$('.alert').removeAttr('style');
					$('.alert').addClass('hidden');
					
					var btn = $(this);
    				btn.button('loading');
					
					
					var jsonSave={idClient:'@session.get("connected")',clientPrediction:{matches:[]}};
			
					$.each(arrPhase, function(index,phase) {
						$.each(phase.group, function(index,group) {
							$.each(group.game, function( index, game ) {								
								jsonSave.clientPrediction.matches.push({"id_match":game.id,"score_team_a":game.team[0].goals.f,"score_team_b":game.team[1].goals.f});
							});
						});
					});

					
					$.ajax({
	            		url: "@controllers.matchesapi.routes.PredictionController.storeClientPrediction",
	            		type: 'POST',	            		
	            		dataType: 'json',
	            		data: JSON.stringify(jsonSave),
	            		contentType: "application/json; charset=utf-8"
	            	}).always(function () {
      					btn.button('reset');    				
    				}).done(function(msg) {
	        			
	        			if (msg.error==0) {	        			
	        				$('#myModal').modal('show');
	        				$('#message').html('<strong>Bien!</strong> Tu pronÃ³stico se ha guardado con Ã©xito.');
	        			} else {
	        				$('#message').html('<strong>Error!</strong> Tu pronÃ³stico no se ha logrado guardar; Vuelve a intentarlo.');	
	        			}

					}).fail(function( jqXHR, textStatus ) {  						
  						$('.alert-danger').removeClass('hidden');
  						
					});


				});



				$(document).on('click','.up, .down', function() {
					

					var _this = $(this);
					var _phase = _this.parents('.phase').data('phase');					
					var _game = _this.parents('.game');
					_game.attr('data-set','true');
					_game = _game.data('game');
					

					/*Oculto menu superior*/
					$.each(arrPhase, function( index,phase) {						
						if (phase.id > _phase) {													
							$('.menu[data-phase="'+phase.id+'"]').addClass('hidden');									
							$('.phase[data-phase="'+phase.id+'"]').addClass('hidden');
						}
					});
					

					var _team =  _this.parents('.team').data('team');

	
					var group = $.fgetGroupActive2(_this);
					var _eGoal = _this.parents('.team').find('.goal');
					var _iGoal = _eGoal.data('goal');

					_iGoal = parseInt(_iGoal);
					
					if ($(this).hasClass('up')) {
						_iGoal = _iGoal + 1;					
					} else {
						if (_iGoal>=1) {
							_iGoal = _iGoal - 1;
						}
					}	

					_eGoal.data('goal',_iGoal);
					_eGoal.html(_iGoal);

					$.each(group.game, function( index, game ) {
						if (_game == game.id) {
							$.each(game.team, function( index, team ) {
								if (_team == team.id) {
									team.goals.f = _iGoal;
								}
							});
						};
						
					});

					$.each(group.game, function( index, game ) {
																																
						if (game.team[0].goals.f > game.team[1].goals.f) {																		
							game.team[0].points = 3;
							game.team[1].points = 0;																																		
						} else if (game.team[1].goals.f > game.team[0].goals.f) {									
							game.team[0].points = 0;									
							game.team[1].points = 3;		
						} else {
							game.team[0].points = 1;
							game.team[1].points = 1;	
						};
						
						game.team[0].goals.a = game.team[1].goals.f;
						game.team[1].goals.a = game.team[0].goals.f;
				
					});

					$.each(group.team, function( index, team ) {

						team.goals.f = 0;
						team.goals.a = 0;
						team.points = 0;
						
						$.each(group.game, function( index, game ) {
							$.each(game.team, function( index, value ) {
								if (team.id == value.id) {
									team.goals.f += value.goals.f;
									team.goals.a += value.goals.a;
									team.goals.d = 	(team.goals.f - team.goals.a);
									team.points += value.points;
								};
							});
						});

					});
					
					if (_phase == 1) {									
						$.fUpdateStandingGroup2();
						$.fUpdateStandingPhase22();						
					} else {
						$.fUpdateStandingPhase22();
					}

					var _total = 0;
					$.each(arrPhase, function( index,phase) {						
						if (phase.id == _phase) {							
							$.each(phase.group, function( index,group) {
								_total += group.classified.length;
							});								
						}
					});
						
										
						
					if ((_phase == 1) && (_total == 16)) {
						$('.menu[data-phase="'+arrPhase[_phase].id+'"]').removeClass('hidden');																		
					} else if ((_phase == 2) && (_total == 8)) {						
						$('.menu[data-phase="'+arrPhase[_phase].id+'"]').removeClass('hidden');							
					} else if ((_phase == 3) && (_total == 4)) {
						$('.menu[data-phase="'+arrPhase[_phase].id+'"]').removeClass('hidden');							
					} else if ((_phase == 4) && (_total == 2)) {
						$('.menu[data-phase="'+arrPhase[_phase].id+'"]').removeClass('hidden');	
						
					}

				});				



			$(document).on('click','.menu[data-phase]', function() {
				
				var _this = $(this);
				var _phase = $(this).data('phase');
				var _position =$(this).data('position');


				$('.menu.phase').removeClass('on');				
				$('.menu.phase[data-phase="'+_phase+'"]').addClass('on');
				$('.row.phase').addClass('hidden');
				$('.row.phase[data-phase="'+_phase+'"]').removeClass('hidden');
				$('.row.phase[data-phase="'+_phase+'"] .group').addClass('hidden');
				
				if (_phase == 1) {						
					$('.menu.group').removeClass('hidden');
					$('.row.phase[data-phase="'+_phase+'"] .group[data-group="1"]').removeClass('hidden');
					$('.menu.group[data-group="1"]').addClass('on');						
				} else {
					$('.row.phase[data-phase="'+_phase+'"] .group').removeClass('hidden');
				}
				
				$.each(arrPhase, function(index,phase) {
					phase.active = false;
					if (phase.id == _phase) {
						
						phase.active = true;
						
						if (_phase == 1) {
							$.each(phase.group, function(index,group) {
								group.active = false;
								if (group.id == 1) {
									group.active = true;	
								}
							});	
						}	
						
						
					}
				});
				
				$.fgetPhaseMenuSmall();
				
			});
			
			$(document).on('click','.menu[data-group]', function() {
				
				var _this = $(this); 
				var _group = $(this).data('group');
				
				$('.menu.group').removeClass('on');
				$('.menu.group[data-group="'+_group+'"]').addClass('on');
				$('.row.group').addClass('hidden');
				$('.row.group[data-group="'+_group+'"]').removeClass('hidden');
				
				$.each(arrPhase, function(index,phase) {
					if (phase.active) {
						$.each(phase.group, function(index,group) {
							group.active = false;
							if (group.id == _group) {
								group.active = true;	
							}
						});
					}
				});
				
			});







			$.fgetUpdate = function() {
				
				
				$.each(arrPhase, function(index,phase) {
					
							
							
							$.each(phase.group, function(index, group) {

								group.active = true;
								$.each(group.game, function( index, game ) {
															
									$.each(game.team, function( index, team ) {							
										team.goals.f = $('.phase[data-phase="'+phase.id+'"] .group[data-group="'+group.id+'"] .game[data-game="'+game.id+'"] .score .team[data-team="'+team.id+'"] .goal').data('goal');
									});
									
									if (game.team[0].goals.f > game.team[1].goals.f) {
										game.team[0].points = 3;
										game.team[1].points = 0;
									} else if (game.team[1].goals.f > game.team[0].goals.f) {
										game.team[0].points = 0;
										game.team[1].points = 3;
									} else {
										game.team[0].points = 1;
										game.team[1].points = 1;
									};
									
									game.team[0].goals.a = game.team[1].goals.f;
									game.team[1].goals.a = game.team[0].goals.f;
									
									
									
								});	
								
								$.each(group.team, function( index, team ) {
		
									team.goals.f = 0;
									team.goals.a = 0;
									team.points = 0;
									
									$.each(group.game, function( index, game ) {
										$.each(game.team, function( index, value ) {
											if (team.id == value.id) {
												team.goals.f += value.goals.f;
												team.goals.a += value.goals.a;
												team.goals.d = 	(team.goals.f - team.goals.a);
												team.points += value.points;
											};
										});
									});

								});
								
								$.fUpdateStandingGroup2();
								
							});
							
							
						
					});

					
				
				
			};
				
			$.fgetPhaseMenuSmall = function() {
				
			
				
			
				var _phase = $('.row.phase:visible').data('phase');
				var _col = '';
				
				
				
				
				
				
				if (_phase == 1) {					
					_col = '<div class="col-md-12" >';
					_col += '<button data-phase="'+arrPhase[1].id+'" type="button" data-position="1" class="btn btn-default menu phase on small" style="float:right;"  >'+arrPhase[1].name+'</button>';	
					_col += '</div>';
				} else if (_phase == 6) {
					_col = '<div class="col-md-12" >';
					_col += '<button data-phase="'+arrPhase[3].id+'" type="button" data-position="1" class="btn btn-default menu phase on small"   >'+arrPhase[3].name+'</button>';	
					_col += '</div>';
				} else  {
					
					
					_col = '<div class="col-xs-6 col-sm-6 col-md-6 col-lg-6" >';
					_col += '<button data-phase="'+arrPhase[_phase-2].id+'" type="button" data-position="1" class="btn btn-default menu phase on small"  >'+arrPhase[_phase-2].name+'</button>';	
					_col += '</div>';	

					_col += '<div class="col-xs-6 col-sm-6 col-md-6 col-lg-6" >';
					_col += '<button data-phase="'+arrPhase[_phase].id+'" type="button" data-position="0" class="btn btn-default menu phase small" style="float:right;" >'+arrPhase[_phase].name+'</button>';
					_col += '</div>';
					
				}
				
				
			
				
				
					
				$('.row.menu.small').html(_col);
				
			};



				$( document ).ready(function() {
					$.fgetPhaseMenuSmall();
					
					
					
					
					
					
					$.fgetUpdate();					
					$.fUpdateStandingPhase22();
				
					$.each(arrPhase, function( index,phase) {
						
							
						
						
												
						var _total = 0;				
						$.each(phase.group, function( index,group) {
							
							if (phase.id == 1) {							
								group.active = false;
								if (group.id == 1) {
									group.active = true;	
								}						
							}
							
							
							
							_total += group.classified.length;
						});								
						
						
						if ((phase.id == 1) && (_total == 16)) {
							$('.menu[data-phase="'+arrPhase[phase.id].id+'"]').removeClass('hidden');																		
						} else if ((phase.id == 2) && (_total == 8)) {						
							$('.menu[data-phase="'+arrPhase[phase.id].id+'"]').removeClass('hidden');							
						} else if ((phase.id == 3) && (_total == 4)) {
							$('.menu[data-phase="'+arrPhase[phase.id].id+'"]').removeClass('hidden');							
						} else if ((phase.id == 4) && (_total == 2)) {
							$('.menu[data-phase="'+arrPhase[phase.id].id+'"]').removeClass('hidden');	
							
						}
						
					});
							
											
							
					
					
				});










	  		});
	  		
	  		var fReplace = function() {
	  			window.location.replace("@routes.Application.exit");
	  		};
	  		
	  		// In your JavaScript code:
			var login_event = function(response) {
					
			  if (response.status == 'connected') {
			  	FB.api('/me', function(response) {
			      	document.getElementById("socialid").value = response.id ;			      	
			      	document.forms[0].submit();
			    });
			  } else if (response.status === 'not_authorized') {
			  	fReplace();
			  } else {
			  	fReplace();
			  }
			};
			
			var logout_event = function(response) {
			  //console.log("logout_event");
			  //console.log(response.status);
			  //console.log(response);
			};
	  		
	  		
	  		function init()
			{
				FB.Event.subscribe('auth.login', login_event);
				FB.Event.subscribe('auth.logout', logout_event);
			}
			

			var fejemplo = function() {
				
				FB.getLoginStatus(function(response) {
				  if (response.status === 'connected') {

						FB.api('/me', function(response) {							
					      	document.getElementById("socialid").value = response.id ;					      	
					      	document.getElementById("socialname").value = response.name;					      	
					      	document.getElementById("socialemail").value = response.email;
				      		document.forms[0].submit();
					    });

				  } else if (response.status === 'not_authorized') {
				    // the user is logged in to Facebook, 
				    // but has not authenticated your app
				    FB.login();
				  } else {
				    // the user isn't logged in to Facebook.
				    FB.login();
				  }
				});
				
				

			    
			    
	  		};

			
  		</script>
        
    </head>
    <body onload="init();">
    	
    	<div id="fb-root"></div>
		<script>(function(d, s, id) {
		  var js, fjs = d.getElementsByTagName(s)[0];
		  if (d.getElementById(id)) return;
		  js = d.createElement(s); js.id = id;
		  js.src = "//connect.facebook.net/es_ES/all.js#xfbml=1&appId=647787605309095";
		  fjs.parentNode.insertBefore(js, fjs);
		}(document, 'script', 'facebook-jssdk'));</script>
		
		
		<script>
			 window.fbAsyncInit = function() {
				  FB.init({
				    appId      : '647787605309095',
				    status     : false, // check login status
				    cookie     : false, // enable cookies to allow the server to access the session
				    xfbml      : true  // parse XFBML
				  });
			  }; 
		</script>
		
    	<script>
			var arrPhase = [];
			var arrGroup = [];
			var arrGame	= [];
			var arrTeamGame = [];
			var arrTeam	= [];
			var arrDataTeam	= [];
		</script>
	
		<div class="container">


			@content	
			
		
		
		
		
		<div  id="myModal" class="modal fade">
		  <div class="modal-dialog">
		    <div class="modal-content">
		      <div class="modal-header">
		        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
		        <h4 class="modal-title">Guardar</h4>
		      </div>
		      <div class="modal-body">
				<div id="message" >
		      		
		      	</div>		        
		      </div>
		      <div class="modal-footer">
		        <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
		      </div>
		    </div><!-- /.modal-content -->
		  </div><!-- /.modal-dialog -->
		</div><!-- /.modal -->
		
		
									
		</div>
		

    </body>
</html>
