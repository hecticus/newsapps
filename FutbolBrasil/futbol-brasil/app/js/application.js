'use strict';

var translationsEn = {
    "SECTIONS" : {
        "NOTISTATS" : {
            "NOTISTATS" : "Notistats",
            "MATCHES": "Matches",
            "STANDINGS": "Standings",
            "NEWS": "News",
            "SCORERS": "Scorers",
            "LIVE": "Live"
        },
        "BETS" : {
            "BETS": "Bets",
            "PREDICTIONS" : "Predictions",
            "LEADERBOARDS" : "Leaderboards",
            "FRIENDS" : "Friends",
            "POINTS" : "Points"
        },
        "SETTINGS": "Settings",
        "LOGIN" : "Login"
    },
    "NEWS" : {
        "TITLE" : "Notícias"

    },
    "SCORERS" : {
        "PLAYER_NAME_LABEL" : "Player",
        "TEAM_LABEL" : "Team",
        "GOALS_LABEL" : "Goals"
    },
    "MATCH" : {
        "STATUS" : {
            "0" : "Not Yet Played",
            "1" : "First Half",
            "2" : "Final",
            "3" : "Suspended",
            "4" : "Postponed",
            "5" : "Half Time",
            "6" : "Second Half",
            "7" : "Full Time",
            "8" : "Overtime 1",
            "9" : "End of Overtime 1",
            "10" : "Overtime 2",
            "11" : "End of Overtime 2",
            "12" : "Penalty Shootouts"
        }
    },
    "LEADERBOARD" : {
        "TOURNAMENT" : "Tournament",
        "PHASE" : "Phase",
        "PLAYER" : "Player",
        "POINTS" : "Points",
        "HITS" : "Hits",
        "MY_POINTS" : "My Points"
    },
    "EMPTY_STATES" : {
        "LIVE" : "There are no games for today",
        "NEWS" : "There are no news available",
        "POINTS" : "You don't have points info available"
    },
    "SETTINGS": {
        "PUSH_TITLE": "Push Notifications",
        "FAVORITE_TEAMS_TITLE": "My Favorite Teams",
        "LANGUAGES_TITLE": "Languages",
        "SOCIAL_ACCOUNTS_TITLE": "Social Accounts",
        "TOGGLE" : {
            "BETS" : "Bets",
            "MTM" : "MTM",
            "NEWS" : "News"
        },
        "FACEBOOK" : {
            "CONNECT" : "Connect With Facebook",
            "CONNECTED" : "Connected to Facebook"
        },
        "ADD_TEAM": "Add Team",
        "NOT_AVAILABLE": "Not Available",
        "LANGUAGE_SEARCH_HELPER" : "Find your language",
        "TEAM_SEARCH_HELPER" : "Find your team"
    },
    "LANGUAGE" : {
        "PT" : "Portuguese",
        "EN" : "English",
        "ES" : "Spanish"
    },
    "LOADING" : "Loading",
    "NOT_AVAILABLE": "Not Available"
};
var translationsEs = {
    "SECTIONS" : {
        "NOTISTATS" : {
            "NOTISTATS" : "Notistats",
            "MATCHES": "Partidos",
            "STANDINGS": "Clasificación",
            "NEWS": "Noticias",
            "SCORERS": "Goleadores",
            "LIVE": "En Vivo"
        },
        "BETS" : {
            "BETS": "Apuestas",
            "PREDICTIONS" : "Prediccines",
            "LEADERBOARDS" : "Leaderboards",
            "FRIENDS" : "Amigos",
            "POINTS" : "Puntos"
        },
        "SETTINGS": "Configuraciónes",
        "LOGIN" : "Login"
    },
    "NEWS" : {
        "TITLE" : "Noticias"

    },
    "SCORERS" : {
        "PLAYER_NAME_LABEL" : "Jugador",
        "TEAM_LABEL" : "Equipo",
        "GOALS_LABEL" : "Goles"
    },
    "MATCH" : {
        "STATUS" : {
            "0" : "Sin Jugar",
            "1" : "Primer Tiempo",
            "2" : "Final",
            "3" : "Suspendido",
            "4" : "Postpuesto",
            "5" : "Medio Tiempo",
            "6" : "Segundo Tiempo",
            "7" : "Tiempo Completo",
            "8" : "Extra tiempo 1",
            "9" : "Fin de Extra tiempo 1",
            "10" : "Extra tiempo 2",
            "11" : "Fin de Extra tiempo 2",
            "12" : "Penales"
        }
    },
    "LEADERBOARD" : {
        "TOURNAMENT" : "Torneo",
        "PHASE" : "Jornada",
        "PLAYER" : "Jugador",
        "POINTS" : "Puntos",
        "HITS" : "Aciertos",
        "MY_POINTS" : "Mis Puntos"
    },
    "EMPTY_STATES" : {
        "LIVE" : "No hay juegos programados para hoy",
        "NEWS" : "No hay noticias disponibles",
        "POINTS" : "Usted no tiene información de puntos disponible"
    },
    "SETTINGS": {
        "PUSH_TITLE": "Notificaciones Push",
        "FAVORITE_TEAMS_TITLE": "Mis Equipos Favoritos",
        "LANGUAGES_TITLE": "Idiomas",
        "SOCIAL_ACCOUNTS_TITLE": "Cuentas Sociales",
        "TOGGLE" : {
            "BETS" : "Apuestas",
            "MTM" : "En Vivo",
            "NEWS" : "Noticias"
        },
        "FACEBOOK" : {
            "CONNECT" : "Conectar con Facebook",
            "CONNECTED" : "Conectado con Facebook"
        },
        "ADD_TEAM": "Agregar Equipo",
        "NOT_AVAILABLE": "No Disponible",
        "LANGUAGE_SEARCH_HELPER" : "Encuentra tu idioma",
        "TEAM_SEARCH_HELPER" : "Encuentra tu equipo"
    },
    "LANGUAGE" : {
        "PT" : "Portugués",
        "EN" : "Inglés",
        "ES" : "Español"
    },
    "LOADING" : "Cargando",
    "NOT_AVAILABLE": "No Disponible"
};
var translationsPt = {
    "SECTIONS" : {
        "NOTISTATS" : {
            "NOTISTATS" : "Notistats",
            "MATCHES": "Partidas",
            "STANDINGS": "Tabela",
            "NEWS": "Notícias",
            "SCORERS": "Artilharia",
            "LIVE": "Ao Minuto"
        },
        "BETS" : {
            "BETS": "Palpites",
            "PREDICTIONS" : "Predições",
            "LEADERBOARDS" : "Leaderboards",
            "FRIENDS" : "Amigos",
            "POINTS" : "Pontos"
        },
        "SETTINGS": "Definições",
        "LOGIN" : "Login"
    },
    "NEWS" : {
        "TITLE" : "Notícias"

    },
    "SCORERS" : {
        "PLAYER_NAME_LABEL" : "Nome do jogador",
        "TEAM_LABEL" : "Equipe",
        "GOALS_LABEL" : "Goles"
    },
    "MATCH" : {
        "STATUS" : {
            "0" : "Sem Jogar",
            "1" : "!Primer tiempo",
            "2" : "Encerrado",
            "3" : "Adiado",
            "4" : "!Postergado",
            "5" : "!Entetiempo",
            "6" : "!Segundo Tiempo",
            "7" : "!Fin de Tiempo Reglamentario",
            "8" : "!Alargue 1",
            "9" : "!Fin de Alargue 1",
            "10" : "!Alarge 2",
            "11" : "!Fin alargue 2",
            "12" : "!Definicion por penales"
        }
    },
    "LEADERBOARD" : {
        "TOURNAMENT" : "Torneo",
        "PHASE" : "Jornada",
        "PLAYER" : "Jogador",
        "POINTS" : "Pontos",
        "HITS" : "Sucessos",
        "MY_POINTS" : "Os Meus Pontos",
        "SCORE" : "Score"
    },
    "EMPTY_STATES" : {
        "LIVE" : "Não há jogos para hoje",
        "NEWS" : "Não há notícias disponíveis",
        "POINTS" : "Você não tem informação de pontos disponível"
    },
    "SETTINGS": {
        "PUSH_TITLE": "Notificações Push",
        "FAVORITE_TEAMS_TITLE": "Meus Equipes Favoritas",
        "LANGUAGES_TITLE": "Idiomas",
        "SOCIAL_ACCOUNTS_TITLE": "Contas Sociais",
        "TOGGLE" : {
            "BETS" : "Palpites",
            "MTM" : "Ao Minuto",
            "NEWS" : "Notícias"
        },
        "FACEBOOK" : {
            "CONNECT" : "Conectar com Facebook",
            "CONNECTED" : "Conectado ao Facebook"
        },
        "ADD_TEAM": "Adicionar Equipe",
        "NOT_AVAILABLE": "Não Disponível",
        "LANGUAGE_SEARCH_HELPER" : "Encontre o seu idioma",
        "TEAM_SEARCH_HELPER" : "Encontre o seu equipe"
    },
    "LANGUAGE" : {
        "PT" : "Português",
        "EN" : "Inglês",
        "ES" : "Espanhol"
    },
    "LOADING" : "A Carregar",
    "NOT_AVAILABLE": "Não Disponível"
};

angular
    .module(ApplicationConfiguration.applicationModuleName
    , ApplicationConfiguration.applicationModuleVendorDependencies);

angular
    .module(ApplicationConfiguration.applicationModuleName)
    .config(['$locationProvider', '$httpProvider', '$translateProvider',
        function($locationProvider, $httpProvider, $translateProvider) {
            $locationProvider.hashPrefix('!');
            $httpProvider.defaults.useXDomain = true;
            $httpProvider.interceptors.push(['$q', '$location', '$injector',
                function ($q, $location, $injector) {
                    return {
                        request: function (config) {
                            var WebManager = WebManager || $injector.get('WebManager');
                            config.headers = $.extend(config.headers, WebManager.getHeaders());
                            return config;
                        }
                    };
                }
            ]);

//            $translateProvider.useStaticFilesLoader({
//                prefix: '../translations/locale-',
//                suffix: '.json'
//            });
            $translateProvider.translations('en', translationsEn);
            $translateProvider.translations('es', translationsEs);
            $translateProvider.translations('pt', translationsPt);
            $translateProvider.preferredLanguage('pt');
            $translateProvider.use('pt');
            $translateProvider.usePostCompiling(true);
        }
    ])
    .run(function($rootScope, $localStorage, $state, $translate, CordovaApp, ClientManager, Client) {
        CordovaApp.init();
        $rootScope.contentClass = 'content-init';
        $rootScope.$storage = $localStorage.$default({
            news: false,
            leaderboard:false,
            scorers:false,
            match:false,
            competitions:false
        });

        $rootScope.$on('$stateChangeStart',  function (event, toState, toParams, fromState, fromParams) {
            $rootScope.error = false;
            $rootScope.$emit('unload');
            if($rootScope.hideMenu) {
                $rootScope.hideMenu();
            }

            if(toState.name !== 'login'){
//                console.log('Client.isClientOk: ' + Client.isClientOk());
                if(!Client.isClientOk()){
                    console.log('client data not loaded. Loading client data again.');
                    ClientManager.init(function(){
                        if(!Client.isClientOk()){
                            console.log('User not Authenticated');
                            event.preventDefault();
                            $state.go('login');
                        }
                    }, CordovaApp.errorStartApp);
                }

                $rootScope.isActiveButton = 'active';
            } else {
                $rootScope.isActiveButton = '';
            }

        });

        $rootScope.$on('$stateChangeSuccess',  function (event, toState, toParams, fromState, fromParams) {
            $rootScope.section = !!toState.data.section ? toState.data.section : '';
            $translate('SECTIONS.' + $rootScope.section.toUpperCase()).then(function(translate){
                $rootScope.sectionTranslation = translate;
            });
            if (toState.data && toState.data.contentClass){
                $rootScope.contentClass = toState.data.contentClass;
            }
        });

    });

//Then define the init function for starting up the application
angular
    .element(document)
    .ready(function() {
        if (window.location.hash === '#_=_') {
            window.location.hash = '#!';
        }
        angular.bootstrap(document, [ApplicationConfiguration.applicationModuleName]);
    });
